---
title: SAP AI Core
description: SAP AI Core Provider for the AI SDK
---

# SAP AI Core

[SAP AI Core](https://help.sap.com/docs/ai-core) is SAP's enterprise-grade AI platform providing access to 80+ models from OpenAI, Anthropic, Google, Amazon, and more through a unified, secure infrastructure. This community provider enables seamless integration with the Vercel AI SDK.

## Important Note

> **Third-Party Provider**: This provider (`@jerome-benoit/sap-ai-provider`) is developed by jerome-benoit, not SAP SE. It uses the official SAP AI SDK but is not an official SAP product.

## Features

- **Multi-Model Access**: 80+ models (GPT-4o, Claude, Gemini, Amazon Nova, Llama)
- **Language Model V3**: Latest AI SDK specification with enhanced streaming
- **Text Embeddings**: Vector embeddings for RAG and semantic search
- **Tool Calling**: Full function calling capabilities
- **Multi-modal Input**: Text and image inputs
- **Data Masking**: Built-in SAP DPI integration for privacy
- **Content Filtering**: Azure Content Safety and Llama Guard support
- **Automatic Authentication**: Via SAP AI SDK credentials

## Setup

<Tabs items={['pnpm', 'npm', 'yarn', 'bun']}>
  <Tab>
    <Snippet text="pnpm add @jerome-benoit/sap-ai-provider ai" dark />
  </Tab>
  <Tab>
    <Snippet text="npm install @jerome-benoit/sap-ai-provider ai" dark />
  </Tab>
  <Tab>
    <Snippet text="yarn add @jerome-benoit/sap-ai-provider ai" dark />
  </Tab>
  <Tab>
    <Snippet text="bun add @jerome-benoit/sap-ai-provider ai" dark />
  </Tab>
</Tabs>

## Provider Instance

```typescript
import { createSAPAIProvider } from '@jerome-benoit/sap-ai-provider';

// Authentication via AICORE_SERVICE_KEY environment variable
const sapai = createSAPAIProvider();

// Or use the default instance
import { sapai } from '@jerome-benoit/sap-ai-provider';
```

## Language Models

```typescript
const gpt4Model = sapai('gpt-4o');
const claudeModel = sapai('anthropic--claude-3.5-sonnet');
const geminiModel = sapai('gemini-2.5-flash');
const novaModel = sapai('amazon--nova-pro');
```

## Supported Models

### Azure OpenAI

- `gpt-4o`, `gpt-4o-mini`, `gpt-4.1`, `gpt-4.1-mini`, `gpt-4.1-nano`
- `o1`, `o3`, `o3-mini`, `o4-mini`

### Anthropic (AWS Bedrock)

- `anthropic--claude-3-haiku`, `anthropic--claude-3-sonnet`, `anthropic--claude-3-opus`
- `anthropic--claude-3.5-sonnet`, `anthropic--claude-3.7-sonnet`
- `anthropic--claude-4-sonnet`, `anthropic--claude-4-opus`

### Google Vertex AI

- `gemini-2.0-flash`, `gemini-2.0-flash-lite`
- `gemini-2.5-flash`, `gemini-2.5-pro`

### Amazon Nova (AWS Bedrock)

- `amazon--nova-premier`, `amazon--nova-pro`, `amazon--nova-lite`, `amazon--nova-micro`

### Open Source

- `mistralai--mistral-large-instruct`, `meta--llama3.1-70b-instruct`
- `cohere--command-a-reasoning`

> Model availability depends on your SAP AI Core tenant configuration.

## Examples

### generateText

```typescript
import { createSAPAIProvider } from '@jerome-benoit/sap-ai-provider';
import { generateText } from 'ai';

const sapai = createSAPAIProvider();

const { text } = await generateText({
  model: sapai('gpt-4o'),
  prompt: 'What are the benefits of enterprise AI platforms?',
});
```

### streamText

```typescript
import { createSAPAIProvider } from '@jerome-benoit/sap-ai-provider';
import { streamText } from 'ai';

const sapai = createSAPAIProvider();

const result = streamText({
  model: sapai('anthropic--claude-3.5-sonnet'),
  prompt: 'Write a short story about AI.',
});

for await (const delta of result.textStream) {
  process.stdout.write(delta);
}
```

### Embeddings

```typescript
import { createSAPAIProvider } from '@jerome-benoit/sap-ai-provider';
import { embed, embedMany } from 'ai';

const sapai = createSAPAIProvider();

const { embedding } = await embed({
  model: sapai.embedding('text-embedding-ada-002'),
  value: 'What is machine learning?',
});

const { embeddings } = await embedMany({
  model: sapai.embedding('text-embedding-3-small'),
  values: ['Hello world', 'AI is amazing', 'Vector search'],
});
```

### Tool Calling

```typescript
import { createSAPAIProvider } from '@jerome-benoit/sap-ai-provider';
import { generateText, tool } from 'ai';
import { z } from 'zod';

const sapai = createSAPAIProvider();

const result = await generateText({
  model: sapai('gpt-4o'),
  prompt: 'What is the weather in Tokyo?',
  tools: {
    getWeather: tool({
      description: 'Get weather for a location',
      parameters: z.object({ location: z.string() }),
      execute: async ({ location }) => `Weather in ${location}: sunny, 72Â°F`,
    }),
  },
  maxSteps: 3,
});
```

### Data Masking (SAP DPI)

```typescript
import {
  createSAPAIProvider,
  buildDpiMaskingProvider,
} from '@jerome-benoit/sap-ai-provider';

const dpiConfig = buildDpiMaskingProvider({
  method: 'anonymization',
  entities: ['profile-email', 'profile-person', 'profile-phone'],
});

const sapai = createSAPAIProvider({
  defaultSettings: {
    masking: { masking_providers: [dpiConfig] },
  },
});
```

### Content Filtering

```typescript
import {
  createSAPAIProvider,
  buildAzureContentSafetyFilter,
} from '@jerome-benoit/sap-ai-provider';

const sapai = createSAPAIProvider({
  defaultSettings: {
    filtering: {
      input: {
        filters: [
          buildAzureContentSafetyFilter('input', {
            hate: 'ALLOW_SAFE',
            violence: 'ALLOW_SAFE_LOW_MEDIUM',
          }),
        ],
      },
    },
  },
});
```

## Configuration

```typescript
const sapai = createSAPAIProvider({
  resourceGroup: 'default', // SAP AI Core resource group
  deploymentId: 'your-deployment-id', // Optional, auto-resolved if not set
  defaultSettings: {
    modelParams: {
      temperature: 0.7,
      maxTokens: 2000,
      topP: 0.9,
    },
  },
});
```

## Environment Setup

### SAP BTP (Recommended)

Bind an AI Core service instance to your app. The SDK auto-detects `VCAP_SERVICES`.

### Local Development

Set `AICORE_SERVICE_KEY` with your service key JSON:

```bash
AICORE_SERVICE_KEY='{"serviceurls":{"AI_API_URL":"https://..."},"clientid":"...","clientsecret":"...","url":"..."}'
```

## Additional Resources

- [SAP AI Provider Repository](https://github.com/jerome-benoit/sap-ai-provider)
- [SAP AI Core Documentation](https://help.sap.com/docs/ai-core)
- [SAP BTP Documentation](https://help.sap.com/docs/btp)
