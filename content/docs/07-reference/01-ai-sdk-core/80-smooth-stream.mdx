---
title: smoothStream
description: Stream transformer for smoothing text output
---

# `smoothStream()`

`smoothStream` is a utility function that creates a TransformStream
for the `streamText` `transform` option
to smooth out text streaming by buffering and releasing complete words with configurable delays.
This creates a more natural reading experience when streaming text responses.

```ts highlight={"6-9"}
import { smoothStream, streamText } from 'ai';

const result = streamText({
  model,
  prompt,
  experimental_transform: smoothStream({
    delayInMs: 20, // optional: defaults to 10ms
    chunking: 'line', // optional: defaults to 'word'
  }),
});
```

## Import

<Snippet text={`import { smoothStream } from "ai"`} prompt={false} />

## API Signature

### Parameters

<PropertiesTable
  content={[
    {
      name: 'delayInMs',
      type: 'number | null',
      isOptional: true,
      description:
        'The delay in milliseconds between outputting each chunk. Defaults to 10ms. Set to `null` to disable delays.',
    },
    {
      name: 'chunking',
      type: '"word" | "line" | RegExp | (buffer: string) => string | undefined | null',
      isOptional: true,
      description:
        'Controls how the text is chunked for streaming. Use "word" to stream word by word (default), "line" to stream line by line, or provide a custom callback or RegExp pattern for custom chunking.',
    },
  ]}
/>

#### Word chunking does not support non-latin languages

> [!TIP]
> The word based chunking **will not pair well** the following languages, that do not delimit words with spaces:
>
> - Chinese
> - Japanese
> - Vietnamese
> - Thai
> - Javanese (Aksara Jawa)
>
> For these languages, **it's recommended to either:**
>
> - **Recommended:** provide your own chunking regex/function that accounts for the language's word boundaries
> - _Don't_ use smoothStream

#### Regex based chunking

To use regex based chunking, pass a `RegExp` to the `chunking` option.

```ts
// To split on underscores:
smoothStream({
  chunking: /_+/,
});

// To split on newlines:
smoothStream({
  chunking: /\n+/,
});
```

#### Custom callback chunking

To use a custom callback for chunking, pass a function to the `chunking` option.

```ts
smoothStream({
  chunking: buffer => {
    return buffer.match(/[^\n]+/)?.[0];
  },
});
```

### Returns

Returns a `TransformStream` that:

- Buffers incoming text chunks
- Releases text when the chunking pattern is encountered
- Adds configurable delays between chunks for smooth output
- Passes through non-text chunks (like step-finish events) immediately
