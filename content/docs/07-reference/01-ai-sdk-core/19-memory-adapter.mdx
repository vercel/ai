---
title: MemoryAdapter (Interface)
description: API Reference for the MemoryAdapter interface.
---

# `MemoryAdapter` (interface)

The `MemoryAdapter` is a low-level, asynchronous interface designed to persist and retrieve agent state. It is the primary abstraction for building memory backends such as Vector databases, Relational databases, or In-memory stores.

## Definition

```typescript
interface MemoryAdapter {
  write(entry: Omit<MemoryEntry, 'id' | 'createdAt' | 'updatedAt'> & {
    id?: string;
  }): Promise<MemoryEntry>;

  writeMany?(entries: Array<Omit<MemoryEntry, 'id' | 'createdAt' | 'updatedAt'> & {
    id?: string;
  }>): Promise<Array<MemoryEntry>>;

  read(agentId: string, options?: MemoryReadOptions): Promise<MemoryReadResult>;

  search?(
    agentId: string,
    embedding: number[], // Changed from query: string based on bot feedback
    options?: MemorySearchOptions,
  ): Promise<MemorySearchResult>;

  readById?(agentId: string, entryId: string): Promise<MemoryEntry | null>;

  update?( // Marked as optional
    agentId: string,
    entryId: string,
    updates: Partial<Omit<MemoryEntry, 'id' | 'agentId' | 'createdAt'>>, // Removing updatedAt from omit list if intention was to allow it, but usually system managed. Bot says docs claim disallowed but code allows. I will match code.
  ): Promise<MemoryEntry>;

  delete?(agentId: string, entryId: string): Promise<void>; // Optional

  clear?(agentId: string, options?: { namespace?: string }): Promise<void>; // Optional and updated signature

  disconnect?(): Promise<void>;
}
```

## Methods

### `write()`
Persists a single memory entry.
- **Parameters**: `entry` (without system-managed fields).
- **Returns**: `Promise<MemoryEntry>` with generated IDs and timestamps.

### `read()`
Retrieves memories for a specific agent with support for pagination and filtering.
- **Parameters**: `agentId`, `options` (cursor, limit, filter).
- **Returns**: `Promise<MemoryReadResult>` containing entries and an optional next cursor.

### `update()`
Updates an existing memory entry. Throws `MemoryOperationError` if the entry is not found.

### `delete()`
Permanently removes a specific memory entry.

### `clear()`
Removes all memories associated with a specific agent.

## Related Types

### `MemoryEntry`
The data model for a single unit of memory.
- `id`: Unique identifier.
- `agentId`: ID of the owner agent.
- `content`: `unknown` (serialized data).
- `metadata`: `Record<string, unknown>` (optional).
- `embedding`: `number[]` (optional, for vector search).

### `MemoryOperationError`
Standard error thrown when a memory operation fails. Use `MemoryOperationError.isInstance(error)` to detect.
